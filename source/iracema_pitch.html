

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>iracema.pitch &mdash; Iracema 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iracema.harmonics" href="iracema_harmonics.html" />
    <link rel="prev" title="iracema.spectral" href="iracema_spectral.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/iracema-white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>
<p><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="iracema_core.html">iracema.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_spectral.html">iracema.spectral</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">iracema.pitch</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_harmonics.html">iracema.harmonics</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_segmentation.html">iracema.segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_plot.html">iracema.plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_features.html">iracema.features</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_aggregation.html">iracema.aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_io.html">iracema.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_run.html">iracema.run</a></li>
<li class="toctree-l1"><a class="reference internal" href="iracema_util.html">iracema.util</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Iracema</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>iracema.pitch</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/source/iracema_pitch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="module-iracema.pitch">
<span id="iracema-pitch"></span><h1>iracema.pitch<a class="headerlink" href="#module-iracema.pitch" title="Permalink to this headline">¶</a></h1>
<p>According to the ANSI standard 1994 <a class="reference internal" href="#ansi1994" id="id1"><span>[ANSI1994]</span></a>, “Pitch is that attribute of
auditory sensation in terms of which sounds may be ordered on a scale extending
from low to high. Pitch depends mainly on the frequency content of the sound
stimulus, but it also depends on the sound pressure and the waveform of the
stimulus.”</p>
<p>This module contains the implementation of a few different pitch estimation
methods.</p>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="ansi1994"><span class="brackets"><a class="fn-backref" href="#id1">ANSI1994</a></span></dt>
<dd><p>American National Standards Institute, 1994.</p>
</dd>
</dl>
<dl class="py function">
<dt id="iracema.pitch.hps">
<code class="sig-prename descclassname"><span class="pre">iracema.pitch.</span></code><code class="sig-name descname"><span class="pre">hps</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fft_time_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minf0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxf0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_downsampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'discard'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iracema/pitch.html#hps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iracema.pitch.hps" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the pitch using Harmonic Product Spectrum.</p>
<p>The Harmonic Product Spectrum measures the maximum coincidence for
harmonics <a class="reference internal" href="#cuadra2001" id="id2"><span>[Cuadra2001]</span></a>. It is based on successive downsampling operations
on the frequency spectrum of the signal. If the signal contains harmonic
components, then it should contain energy in the frequency positions
corresponding to the integer multiples of the fundamental frequency. So by
down-sampling the spectrum by increasing integer factors
<span class="math notranslate nohighlight">\((1,2,3,...,R)\)</span> it is possible to align the energy of its harmonic
components with the fundamental frequency of the signal.</p>
<p>Then we multiply the original spectrum and its downsampled versions. This
operation will make a strong peak appear in a position that corresponds to
the fundamental frequency. The HPS calculates the maximum coincidence for
harmonics, according to the equation:</p>
<div class="math notranslate nohighlight">
\[Y(\omega) = \prod_{r=1}^{R} |X(\omega r)|\]</div>
<p>where <span class="math notranslate nohighlight">\(X(\omega r)\)</span> represents one spectral frame and <span class="math notranslate nohighlight">\(R\)</span> is
the number of harmonics to be considered in the calculation. After this
calculation a simple peak detection algorithm is used to obtain the
fundamental frequency of the frame.</p>
<p>This implementation modifies this approach adding an offset of 1 to the
magnitude spectrum of the signal before applying the product shown in the
equation above. This makes the algorithm more reliable in situations where
some harmonics have very little or no energy at all (float arithmetic is
not reliable when values get too close to zero).</p>
<p>Also, alternatively to the original approach, it is possible to choose
between different interpolation methods, using the argument <cite>decimation</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fft_time_series</strong> (<em>iracema.spectral.FFTs</em>) – FFT time series.</p></li>
<li><p><strong>minf0</strong> (<em>float</em>) – Lower frequency limit to search for f0.</p></li>
<li><p><strong>maxf0</strong> (<em>float</em>) – Upper frequency limit to search for f0.</p></li>
<li><p><strong>n_downsampling</strong> (<em>int</em>) – Number of downsampling operations</p></li>
<li><p><strong>decimation</strong> (<em>'discard'</em><em>, </em><em>'mean'</em><em> or </em><em>'interpolation'</em>) – Type of decimation operation to be performed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pitch</strong> – A pitch time series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="iracema_core_timeseries.html#iracema.core.timeseries.TimeSeries" title="iracema.core.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="cuadra2001"><span class="brackets"><a class="fn-backref" href="#id2">Cuadra2001</a></span></dt>
<dd><p>De La Cuadra, P. Efficient pitch detection techniques for
interactive music. In ICMC, page 403–406, 2001.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="iracema.pitch.expan">
<code class="sig-prename descclassname"><span class="pre">iracema.pitch.</span></code><code class="sig-name descname"><span class="pre">expan</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fft_time_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minf0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxf0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4200.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nharm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_mag_cand</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisiness_tresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.99</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perc_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.04</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iracema/pitch.html#expan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iracema.pitch.expan" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the pitch using the Expan pitch detection algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fft_time_series</strong> (<em>iracema.spectral.FFTs</em>) – FFT time series.</p></li>
<li><p><strong>minf0</strong> (<em>float</em>) – Lower frequency limit to search for f0.</p></li>
<li><p><strong>maxf0</strong> (<em>float</em>) – Upper frequency limit to search for f0.</p></li>
<li><p><strong>nharm</strong> (<em>int</em>) – Number of harmonics to be considered.</p></li>
<li><p><strong>ncand</strong> (<em>int</em>) – Number of f0 candidate components to be used.</p></li>
<li><p><strong>min_mag_cand</strong> (<em>float</em>) – Minimum magnitude of the candidate to be chosen as f0.</p></li>
<li><p><strong>noisiness_tresh</strong> (<em>float</em>) – Noisiness treshold.</p></li>
<li><p><strong>perc_tol</strong> (<em>float</em>) – Tolerance percentage to search for harmonics.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pitch</strong> – A pitch time series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="iracema_core_timeseries.html#iracema.core.timeseries.TimeSeries" title="iracema.core.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="iracema.pitch.crepe">
<code class="sig-prename descclassname"><span class="pre">iracema.pitch.</span></code><code class="sig-name descname"><span class="pre">crepe</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_capacity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'large'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_confidence</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">viterbi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iracema/pitch.html#crepe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iracema.pitch.crepe" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the pitch using CREPE pitch tracker.</p>
<p>This function uses a pitch tracker based on deep convolutional neural
networks. The model was proposed and trained by <a class="reference internal" href="#kim2018" id="id3"><span>[Kim2018]</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio</strong> (<a class="reference internal" href="iracema_core_audio.html#iracema.core.audio.Audio" title="iracema.core.audio.Audio"><em>iracema.core.audio.Audio</em></a>) – Audio time series.</p></li>
<li><p><strong>step_size</strong> (<em>float</em>) – Length of the time steps for the pitch extraction.</p></li>
<li><p><strong>model_capacity</strong> (<em>'tiny'</em><em>, </em><em>'small'</em><em>, </em><em>'medium'</em><em>, </em><em>'large'</em><em>, or </em><em>'full'</em>) – String specifying the capacity of the model. The value ‘full’ will use
the model specified in the paper. The others will reduce the number of
filters in the convolutional layers, resulting in faster computation,
at the cost of slightly reduced accuracy.</p></li>
<li><p><strong>min_confidence</strong> (<em>float</em>) – Minimum confidence to consider a pitch detection as valid.</p></li>
<li><p><strong>viterbi</strong> (<em>bool</em>) – Viterbi smoothing for pitch curve.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pitch</strong> – A pitch time series.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="iracema_core_timeseries.html#iracema.core.timeseries.TimeSeries" title="iracema.core.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="kim2018"><span class="brackets"><a class="fn-backref" href="#id3">Kim2018</a></span></dt>
<dd><p>Kim, J. W., Salamon, J., Li, P., &amp; Bello, J. P. (2018). CREPE:
A Convolutional Representation for Pitch Estimation. In Proceedings of
the IEEE International Conference on Acoustics, Speech, and Signal
Processing (ICASSP).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="iracema.pitch.pitch_filter">
<code class="sig-prename descclassname"><span class="pre">iracema.pitch.</span></code><code class="sig-name descname"><span class="pre">pitch_filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pitch_time_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.04</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iracema/pitch.html#pitch_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iracema.pitch.pitch_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>The pitch curve can be noisy, this function tries to smooth it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta_max</strong> (<em>int</em>) – Delta parameter for the smoothing algorithm.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pitch</strong> – A smoothed pitch time series.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="iracema_core_timeseries.html#iracema.core.timeseries.TimeSeries" title="iracema.core.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="iracema.pitch.pitch_mode">
<code class="sig-prename descclassname"><span class="pre">iracema.pitch.</span></code><code class="sig-name descname"><span class="pre">pitch_mode</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pitch_time_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/iracema/pitch.html#pitch_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#iracema.pitch.pitch_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a windowed mode to the pitch curve to remove noise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>window</strong> (<em>int</em>) – Length of the window for the calculation of the mode.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pitch</strong> – A smoothed pitch time series.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="iracema_core_timeseries.html#iracema.core.timeseries.TimeSeries" title="iracema.core.timeseries.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="iracema_harmonics.html" class="btn btn-neutral float-right" title="iracema.harmonics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="iracema_spectral.html" class="btn btn-neutral float-left" title="iracema.spectral" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Tairone N. Magalhães.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>